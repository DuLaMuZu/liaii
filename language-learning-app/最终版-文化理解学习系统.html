<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡åŒ–ç†è§£è¯­è¨€å­¦ä¹ ç³»ç»Ÿ - Language Learning Through Cultural Understanding</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #48bb78;
            --warning: #ed8936;
            --danger: #f56565;
            --bg-main: #f7fafc;
            --text-dark: #2d3748;
            --text-light: #718096;
            --border: #e2e8f0;
            --meaning-color: #5a67d8;
            --visual-color: #ed64a6;
            --pronunciation-color: #48bb78;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text-dark);
            line-height: 1.6;
        }

        /* ä¸»å®¹å™¨ */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .header .subtitle {
            font-size: 18px;
            opacity: 0.95;
            font-weight: 300;
        }

        .philosophy {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 20px 30px;
            border-radius: 15px;
            margin-top: 25px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .philosophy-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .philosophy-text {
            font-size: 15px;
            line-height: 1.8;
            opacity: 0.9;
        }

        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            margin-bottom: 30px;
        }

        .control-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-dark);
        }

        .mode-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .mode-card {
            padding: 20px;
            border: 2px solid var(--border);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .mode-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .mode-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }

        .mode-icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .mode-title {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .mode-desc {
            font-size: 13px;
            color: var(--text-light);
        }

        .start-btn {
            width: 100%;
            padding: 18px;
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .start-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* å­¦ä¹ å¡ç‰‡å®¹å™¨ */
        .learning-container {
            perspective: 1000px;
        }

        .concept-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            overflow: hidden;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            min-height: 600px;
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px 35px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-indicator {
            font-size: 16px;
            font-weight: 600;
        }

        .card-badges {
            display: flex;
            gap: 10px;
        }

        .badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            background: rgba(255,255,255,0.25);
        }

        .card-body {
            padding: 40px;
        }

        /* å­¦ä¹ é˜¶æ®µæŒ‡ç¤ºå™¨ */
        .learning-stage-indicator {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 35px;
        }

        .stage {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 25px;
            background: var(--bg-main);
            border: 2px solid var(--border);
            transition: all 0.3s;
        }

        .stage.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
            font-weight: 700;
        }

        .stage-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }

        .stage.active .stage-number {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* ç¬¬ä¸€é˜¶æ®µï¼šæ–‡åŒ–ç†è§£ */
        .cultural-understanding-section {
            display: none;
        }

        .cultural-understanding-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .word-display {
            text-align: center;
            margin-bottom: 35px;
        }

        .word-english {
            font-size: 56px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .word-chinese {
            font-size: 32px;
            color: var(--text-dark);
            font-weight: 600;
        }

        .cultural-distance-viz {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(118, 75, 162, 0.08));
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .viz-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            color: var(--text-dark);
        }

        .distance-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .distance-item {
            text-align: center;
        }

        .distance-label {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .distance-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 800;
            color: white;
            position: relative;
            background: conic-gradient(var(--meaning-color) 0deg, transparent 0deg);
        }

        .distance-circle::before {
            content: '';
            position: absolute;
            width: 70%;
            height: 70%;
            background: white;
            border-radius: 50%;
            z-index: 1;
        }

        .distance-circle span {
            position: relative;
            z-index: 2;
            color: var(--text-dark);
        }

        .distance-insight {
            font-size: 13px;
            color: var(--text-dark);
            font-weight: 500;
        }

        .total-distance-bar {
            height: 12px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            margin-bottom: 12px;
        }

        .total-distance-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--warning), var(--danger));
            border-radius: 10px;
            transition: width 1s ease;
        }

        .difficulty-label {
            text-align: center;
            font-size: 18px;
            font-weight: 700;
        }

        .cultural-note {
            background: white;
            border-left: 4px solid var(--primary);
            padding: 20px 25px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .cultural-note-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cultural-note-text {
            font-size: 15px;
            line-height: 1.8;
            color: var(--text-dark);
        }

        /* ç¬¬äºŒé˜¶æ®µï¼šæ¦‚å¿µå»ºç«‹ */
        .concept-building-section {
            display: none;
        }

        .concept-building-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .definition-box {
            background: var(--bg-main);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .definition-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .definition-text {
            font-size: 17px;
            line-height: 1.8;
            color: var(--text-dark);
        }

        .example-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            padding: 25px;
            border-radius: 12px;
            border-left: 4px solid var(--secondary);
            margin-bottom: 25px;
        }

        .example-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 10px;
        }

        .example-text {
            font-size: 17px;
            font-style: italic;
            line-height: 1.8;
            color: var(--text-dark);
        }

        /* ç¬¬ä¸‰é˜¶æ®µï¼šè®°å¿†è¯„ä¼° */
        .memory-assessment-section {
            display: none;
        }

        .memory-assessment-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .recall-test {
            background: var(--bg-main);
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 30px;
        }

        .recall-prompt {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-dark);
        }

        .recall-word {
            font-size: 48px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .assessment-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .assessment-option {
            padding: 20px 25px;
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .assessment-option:hover {
            border-color: var(--primary);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.15);
        }

        .option-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option-desc {
            font-size: 14px;
            color: var(--text-light);
        }

        /* å¯¼èˆªæŒ‰é’® */
        .card-navigation {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .nav-btn {
            flex: 1;
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-btn-secondary {
            background: var(--bg-main);
            color: var(--text-dark);
            border: 2px solid var(--border);
        }

        .nav-btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        /* ç»Ÿè®¡é¢æ¿ */
        .stats-panel {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }

        .stats-panel.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .stats-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 30px;
            text-align: center;
            color: var(--text-dark);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 35px;
        }

        .stat-card {
            background: var(--bg-main);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 40px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-light);
            font-weight: 600;
        }

        .understanding-breakdown {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(118, 75, 162, 0.08));
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 25px;
        }

        .breakdown-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }

        .breakdown-bars {
            display: grid;
            gap: 20px;
        }

        .breakdown-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
        }

        .breakdown-label-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .breakdown-bar {
            height: 10px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        .breakdown-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease;
        }

        .restart-btn {
            width: 100%;
            padding: 18px;
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .mode-selector {
                grid-template-columns: 1fr;
            }

            .distance-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .word-english {
                font-size: 40px;
            }

            .word-chinese {
                font-size: 24px;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <h1>ğŸŒ æ–‡åŒ–ç†è§£è¯­è¨€å­¦ä¹ ç³»ç»Ÿ</h1>
            <p class="subtitle">Language Learning Through Cultural Understanding</p>
            <div class="philosophy">
                <div class="philosophy-title">ğŸ’­ æ ¸å¿ƒç†å¿µ</div>
                <div class="philosophy-text">
                    è¯­è¨€ä¸ä»…æ˜¯è¯æ±‡çš„å¯¹åº”ï¼Œæ›´æ˜¯æ–‡åŒ–çš„æ¡¥æ¢ã€‚æ¯ä¸ªè¯æ±‡èƒŒåéƒ½æ‰¿è½½ç€ç‹¬ç‰¹çš„æ–‡åŒ–ç†è§£ã€‚
                    æœ¬ç³»ç»Ÿé€šè¿‡<strong>ä¸‰ç»´æ–‡åŒ–è·ç¦»æ¨¡å‹</strong>ï¼ˆå«ä¹‰ã€è§†è§‰ã€è¯»éŸ³ï¼‰ï¼Œå¸®åŠ©æ‚¨æ·±å…¥ç†è§£è¯æ±‡çš„æ–‡åŒ–å†…æ¶µã€‚
                    å­¦ä¹ è·¯å¾„ï¼š<strong>æ–‡åŒ–ç†è§£ â†’ æ¦‚å¿µå»ºç«‹ â†’ è®°å¿†å·©å›º</strong>ï¼Œè®©è¯­è¨€å­¦ä¹ æˆä¸ºæ–‡åŒ–æ¢ç´¢ä¹‹æ—…ã€‚
                </div>
            </div>
        </header>

        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="control-panel" id="controlPanel">
            <h2 class="control-title">ğŸ“š å¼€å§‹å­¦ä¹ </h2>

            <div class="mode-selector">
                <div class="mode-card" onclick="selectMode('cultural')" id="culturalMode">
                    <div class="mode-icon">ğŸ­</div>
                    <div class="mode-title">æ–‡åŒ–æ¢ç´¢æ¨¡å¼</div>
                    <div class="mode-desc">æ·±å…¥ç†è§£é«˜æ–‡åŒ–è·ç¦»è¯æ±‡</div>
                </div>
                <div class="mode-card" onclick="selectMode('balanced')" id="balancedMode">
                    <div class="mode-icon">âš–ï¸</div>
                    <div class="mode-title">å¹³è¡¡å­¦ä¹ æ¨¡å¼</div>
                    <div class="mode-desc">æ··åˆä¸åŒæ–‡åŒ–è·ç¦»è¯æ±‡</div>
                </div>
                <div class="mode-card" onclick="selectMode('quick')" id="quickMode">
                    <div class="mode-icon">âš¡</div>
                    <div class="mode-title">å¿«é€Ÿè®°å¿†æ¨¡å¼</div>
                    <div class="mode-desc">ä¸“æ³¨ä½æ–‡åŒ–è·ç¦»è¯æ±‡</div>
                </div>
            </div>

            <button class="start-btn" id="startBtn" onclick="startLearning()" disabled>
                å¼€å§‹æ–‡åŒ–ç†è§£ä¹‹æ—…
            </button>
        </div>

        <!-- å­¦ä¹ å¡ç‰‡ -->
        <div class="learning-container hidden" id="learningContainer">
            <div class="concept-card">
                <!-- å¡ç‰‡å¤´éƒ¨ -->
                <div class="card-header">
                    <div class="progress-indicator">
                        <span id="currentIndex">1</span> / <span id="totalWords">20</span>
                    </div>
                    <div class="card-badges">
                        <span class="badge" id="levelBadge">A1</span>
                        <span class="badge" id="posBadge">n.</span>
                    </div>
                </div>

                <!-- å¡ç‰‡ä¸»ä½“ -->
                <div class="card-body">
                    <!-- å­¦ä¹ é˜¶æ®µæŒ‡ç¤ºå™¨ -->
                    <div class="learning-stage-indicator">
                        <div class="stage active" id="stage1">
                            <div class="stage-number">1</div>
                            <span>æ–‡åŒ–ç†è§£</span>
                        </div>
                        <div class="stage" id="stage2">
                            <div class="stage-number">2</div>
                            <span>æ¦‚å¿µå»ºç«‹</span>
                        </div>
                        <div class="stage" id="stage3">
                            <div class="stage-number">3</div>
                            <span>è®°å¿†è¯„ä¼°</span>
                        </div>
                    </div>

                    <!-- ç¬¬ä¸€é˜¶æ®µï¼šæ–‡åŒ–ç†è§£ -->
                    <div class="cultural-understanding-section active" id="culturalSection">
                        <div class="word-display">
                            <div class="word-english" id="wordEnglish">table</div>
                            <div class="word-chinese" id="wordChinese">æ¡Œå­ã€è¡¨æ ¼</div>
                        </div>

                        <div class="cultural-distance-viz">
                            <div class="viz-title">ğŸ“Š ä¸‰ç»´æ–‡åŒ–è·ç¦»åˆ†æ</div>

                            <div class="distance-grid">
                                <div class="distance-item">
                                    <div class="distance-label">å«ä¹‰è·ç¦» (40%)</div>
                                    <div class="distance-circle" id="meaningCircle">
                                        <span id="meaningValue">0.10</span>
                                    </div>
                                    <div class="distance-insight" id="meaningInsight">å®Œå…¨å¯¹åº”</div>
                                </div>
                                <div class="distance-item">
                                    <div class="distance-label">è§†è§‰è·ç¦» (30%)</div>
                                    <div class="distance-circle" id="visualCircle">
                                        <span id="visualValue">0.73</span>
                                    </div>
                                    <div class="distance-insight" id="visualInsight">ç¬”ç”»å·®å¼‚å¤§</div>
                                </div>
                                <div class="distance-item">
                                    <div class="distance-label">è¯»éŸ³è·ç¦» (30%)</div>
                                    <div class="distance-circle" id="pronunciationCircle">
                                        <span id="pronunciationValue">0.80</span>
                                    </div>
                                    <div class="distance-insight" id="pronunciationInsight">å‘éŸ³è¾ƒç®€å•</div>
                                </div>
                            </div>

                            <div class="total-distance-bar">
                                <div class="total-distance-fill" id="totalDistanceFill"></div>
                            </div>
                            <div class="difficulty-label" id="difficultyLabel">
                                ç»¼åˆéš¾åº¦ï¼š<span id="difficultyText">ç®€å•</span> (<span id="totalDistanceValue">0.35</span>)
                            </div>
                        </div>

                        <div class="cultural-note">
                            <div class="cultural-note-title">
                                <span>ğŸ”</span>
                                <span>æ–‡åŒ–æ´å¯Ÿ</span>
                            </div>
                            <div class="cultural-note-text" id="culturalNoteText">
                                ç‰©ç†å¯¹è±¡ï¼Œä¸€å¯¹ä¸€å¯¹åº”ï¼Œæ— æ–‡åŒ–å·®å¼‚
                            </div>
                        </div>

                        <div class="card-navigation">
                            <button class="nav-btn nav-btn-primary" onclick="nextStage()">
                                æˆ‘ç†è§£äº†æ–‡åŒ–èƒŒæ™¯ â†’
                            </button>
                        </div>
                    </div>

                    <!-- ç¬¬äºŒé˜¶æ®µï¼šæ¦‚å¿µå»ºç«‹ -->
                    <div class="concept-building-section" id="conceptSection">
                        <div class="word-display">
                            <div class="word-english" id="wordEnglish2">table</div>
                            <div class="word-chinese" id="wordChinese2">æ¡Œå­ã€è¡¨æ ¼</div>
                        </div>

                        <div class="definition-box">
                            <div class="definition-title">ğŸ“– è‹±æ–‡å®šä¹‰ï¼ˆç”¨ç®€å•è‹±æ–‡ç†è§£ï¼‰</div>
                            <div class="definition-text" id="definitionText">
                                A piece of furniture with a flat top used for eating or working
                            </div>
                        </div>

                        <div class="example-box">
                            <div class="example-title">ğŸ’¬ å®é™…ä¾‹å¥</div>
                            <div class="example-text" id="exampleText">
                                "We sat at the table for dinner"
                            </div>
                        </div>

                        <div class="card-navigation">
                            <button class="nav-btn nav-btn-secondary" onclick="prevStage()">
                                â† è¿”å›æ–‡åŒ–ç†è§£
                            </button>
                            <button class="nav-btn nav-btn-primary" onclick="nextStage()">
                                æˆ‘å»ºç«‹äº†æ¦‚å¿µ â†’
                            </button>
                        </div>
                    </div>

                    <!-- ç¬¬ä¸‰é˜¶æ®µï¼šè®°å¿†è¯„ä¼° -->
                    <div class="memory-assessment-section" id="memorySection">
                        <div class="recall-test">
                            <div class="recall-prompt">ğŸ¤” ç°åœ¨ï¼Œæ‚¨èƒ½ç†è§£å’Œè®°å¿†è¿™ä¸ªè¯å—ï¼Ÿ</div>
                            <div class="recall-word" id="wordEnglish3">table</div>
                        </div>

                        <div class="assessment-options">
                            <div class="assessment-option" onclick="assessMemory('mastered')">
                                <div class="option-title">
                                    <span>âœ…</span>
                                    <span>å®Œå…¨æŒæ¡</span>
                                </div>
                                <div class="option-desc">
                                    æˆ‘ç†è§£äº†æ–‡åŒ–èƒŒæ™¯ï¼Œè®°ä½äº†è¯ä¹‰å’Œç”¨æ³•ï¼Œå¯ä»¥è‡ªå¦‚è¿ç”¨
                                </div>
                            </div>
                            <div class="assessment-option" onclick="assessMemory('understood')">
                                <div class="option-title">
                                    <span>ğŸ¯</span>
                                    <span>ç†è§£ä½†éœ€å·©å›º</span>
                                </div>
                                <div class="option-desc">
                                    æˆ‘ç†è§£äº†æ–‡åŒ–å«ä¹‰å’Œæ¦‚å¿µï¼Œä½†éœ€è¦æ›´å¤šç»ƒä¹ æ¥è®°å¿†
                                </div>
                            </div>
                            <div class="assessment-option" onclick="assessMemory('learning')">
                                <div class="option-title">
                                    <span>ğŸ“š</span>
                                    <span>åˆæ­¥ç†è§£</span>
                                </div>
                                <div class="option-desc">
                                    æˆ‘æœ‰äº†åŸºæœ¬ç†è§£ï¼Œä½†æ–‡åŒ–èƒŒæ™¯å’Œç”¨æ³•è¿˜éœ€è¦æ·±å…¥å­¦ä¹ 
                                </div>
                            </div>
                            <div class="assessment-option" onclick="assessMemory('difficult')">
                                <div class="option-title">
                                    <span>ğŸ”„</span>
                                    <span>éœ€è¦é‡æ–°å­¦ä¹ </span>
                                </div>
                                <div class="option-desc">
                                    è¿™ä¸ªè¯çš„æ–‡åŒ–è·ç¦»è¾ƒå¤§ï¼Œæˆ‘éœ€è¦é‡æ–°ç†è§£å…¶æ–‡åŒ–èƒŒæ™¯
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»Ÿè®¡é¢æ¿ -->
        <div class="stats-panel" id="statsPanel">
            <h2 class="stats-title">ğŸ“Š å­¦ä¹ æˆæœåˆ†æ</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="statTotal">20</div>
                    <div class="stat-label">å­¦ä¹ è¯æ±‡æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statMastered">0</div>
                    <div class="stat-label">å®Œå…¨æŒæ¡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statUnderstood">0</div>
                    <div class="stat-label">ç†è§£ä½†éœ€å·©å›º</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statNeedReview">0</div>
                    <div class="stat-label">éœ€è¦å¤ä¹ </div>
                </div>
            </div>

            <div class="understanding-breakdown">
                <div class="breakdown-title">ğŸ¯ ç†è§£ç¨‹åº¦åˆ†å¸ƒ</div>
                <div class="breakdown-bars">
                    <div class="breakdown-item">
                        <div class="breakdown-label-row">
                            <span>å®Œå…¨æŒæ¡</span>
                            <span id="masteredPercent">0%</span>
                        </div>
                        <div class="breakdown-bar">
                            <div class="breakdown-fill" id="masteredBar" style="width: 0%; background: var(--success);"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label-row">
                            <span>ç†è§£ä½†éœ€å·©å›º</span>
                            <span id="understoodPercent">0%</span>
                        </div>
                        <div class="breakdown-bar">
                            <div class="breakdown-fill" id="understoodBar" style="width: 0%; background: var(--primary);"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label-row">
                            <span>åˆæ­¥ç†è§£</span>
                            <span id="learningPercent">0%</span>
                        </div>
                        <div class="breakdown-bar">
                            <div class="breakdown-fill" id="learningBar" style="width: 0%; background: var(--warning);"></div>
                        </div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label-row">
                            <span>éœ€è¦é‡æ–°å­¦ä¹ </span>
                            <span id="difficultPercent">0%</span>
                        </div>
                        <div class="breakdown-bar">
                            <div class="breakdown-fill" id="difficultBar" style="width: 0%; background: var(--danger);"></div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="restart-btn" onclick="restart()">
                ğŸ”„ å¼€å§‹æ–°çš„å­¦ä¹ æ—…ç¨‹
            </button>
        </div>
    </div>

    <script src="enhanced-data.js"></script>
    <script>
        // åº”ç”¨çŠ¶æ€
        let selectedMode = null;
        let currentStage = 1; // 1: æ–‡åŒ–ç†è§£, 2: æ¦‚å¿µå»ºç«‹, 3: è®°å¿†è¯„ä¼°
        let learningSession = {
            words: [],
            currentIndex: 0,
            results: {
                mastered: 0,
                understood: 0,
                learning: 0,
                difficult: 0
            }
        };

        // é€‰æ‹©æ¨¡å¼
        function selectMode(mode) {
            selectedMode = mode;

            // æ›´æ–°UI
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById(mode + 'Mode').classList.add('selected');
            document.getElementById('startBtn').disabled = false;
        }

        // å¼€å§‹å­¦ä¹ 
        function startLearning() {
            // æ ¹æ®æ¨¡å¼è¿‡æ»¤è¯æ±‡
            let filteredWords = [];

            if (selectedMode === 'cultural') {
                // æ–‡åŒ–æ¢ç´¢ï¼šé«˜æ–‡åŒ–è·ç¦»è¯æ±‡ (totalDistance > 0.5)
                filteredWords = enhancedVocabularyData.filter(w => w.totalDistance > 0.5);
            } else if (selectedMode === 'quick') {
                // å¿«é€Ÿè®°å¿†ï¼šä½æ–‡åŒ–è·ç¦»è¯æ±‡ (totalDistance < 0.4)
                filteredWords = enhancedVocabularyData.filter(w => w.totalDistance < 0.4);
            } else {
                // å¹³è¡¡å­¦ä¹ ï¼šå…¨éƒ¨è¯æ±‡
                filteredWords = enhancedVocabularyData;
            }

            // éšæœºé€‰æ‹©20ä¸ªè¯
            learningSession.words = filteredWords
                .sort(() => Math.random() - 0.5)
                .slice(0, Math.min(20, filteredWords.length));

            learningSession.currentIndex = 0;
            currentStage = 1;

            // éšè—æ§åˆ¶é¢æ¿ï¼Œæ˜¾ç¤ºå­¦ä¹ å®¹å™¨
            document.getElementById('controlPanel').classList.add('hidden');
            document.getElementById('learningContainer').classList.remove('hidden');
            document.getElementById('totalWords').textContent = learningSession.words.length;

            // æ˜¾ç¤ºç¬¬ä¸€ä¸ªè¯
            showCurrentWord();
        }

        // æ˜¾ç¤ºå½“å‰è¯æ±‡
        function showCurrentWord() {
            const word = learningSession.words[learningSession.currentIndex];

            // é‡ç½®é˜¶æ®µ
            currentStage = 1;
            updateStageIndicator();

            // æ›´æ–°è¿›åº¦
            document.getElementById('currentIndex').textContent = learningSession.currentIndex + 1;

            // æ›´æ–°å¾½ç« 
            document.getElementById('levelBadge').textContent = word.level;
            document.getElementById('posBadge').textContent = word.partOfSpeech;

            // ç¬¬ä¸€é˜¶æ®µï¼šæ–‡åŒ–ç†è§£
            document.getElementById('wordEnglish').textContent = word.english;
            document.getElementById('wordChinese').textContent = word.chinese.join('ã€');

            // ä¸‰ç»´è·ç¦»å¯è§†åŒ–
            updateDistanceVisualization(word);

            // æ–‡åŒ–æ´å¯Ÿ
            document.getElementById('culturalNoteText').textContent = word.culturalNote || 'è¯¥è¯æ±‡çš„æ–‡åŒ–ç†è§£ç›¸å¯¹ç›´æ¥';

            // ç¬¬äºŒé˜¶æ®µï¼šæ¦‚å¿µå»ºç«‹
            document.getElementById('wordEnglish2').textContent = word.english;
            document.getElementById('wordChinese2').textContent = word.chinese.join('ã€');
            document.getElementById('definitionText').textContent = word.definition;
            document.getElementById('exampleText').textContent = '"' + word.example + '"';

            // ç¬¬ä¸‰é˜¶æ®µï¼šè®°å¿†è¯„ä¼°
            document.getElementById('wordEnglish3').textContent = word.english;
        }

        // æ›´æ–°è·ç¦»å¯è§†åŒ–
        function updateDistanceVisualization(word) {
            // å«ä¹‰è·ç¦»
            const meaningDeg = word.meaningDistance * 360;
            document.getElementById('meaningCircle').style.background =
                `conic-gradient(var(--meaning-color) ${meaningDeg}deg, #e2e8f0 ${meaningDeg}deg)`;
            document.getElementById('meaningValue').textContent = word.meaningDistance.toFixed(2);
            document.getElementById('meaningInsight').textContent = getMeaningInsight(word.meaningDistance);

            // è§†è§‰è·ç¦»
            const visualDeg = word.visualDistance * 360;
            document.getElementById('visualCircle').style.background =
                `conic-gradient(var(--visual-color) ${visualDeg}deg, #e2e8f0 ${visualDeg}deg)`;
            document.getElementById('visualValue').textContent = word.visualDistance.toFixed(2);
            document.getElementById('visualInsight').textContent = getVisualInsight(word.visualDistance);

            // è¯»éŸ³è·ç¦»
            const pronunciationDeg = word.pronunciationDistance * 360;
            document.getElementById('pronunciationCircle').style.background =
                `conic-gradient(var(--pronunciation-color) ${pronunciationDeg}deg, #e2e8f0 ${pronunciationDeg}deg)`;
            document.getElementById('pronunciationValue').textContent = word.pronunciationDistance.toFixed(2);
            document.getElementById('pronunciationInsight').textContent = getPronunciationInsight(word.pronunciationDistance);

            // ç»¼åˆè·ç¦»
            document.getElementById('totalDistanceFill').style.width = (word.totalDistance * 100) + '%';
            document.getElementById('totalDistanceValue').textContent = word.totalDistance.toFixed(2);
            document.getElementById('difficultyText').textContent = word.difficultyLabel;
        }

        // è·å–å«ä¹‰è·ç¦»æ´å¯Ÿ
        function getMeaningInsight(distance) {
            if (distance < 0.2) return 'å®Œå…¨å¯¹åº”';
            if (distance < 0.4) return 'åŸºæœ¬å¯¹åº”';
            if (distance < 0.6) return 'æœ‰æ–‡åŒ–å·®å¼‚';
            if (distance < 0.8) return 'æ˜¾è‘—å·®å¼‚';
            return 'é«˜åº¦æ¨¡ç³Š';
        }

        // è·å–è§†è§‰è·ç¦»æ´å¯Ÿ
        function getVisualInsight(distance) {
            if (distance < 0.5) return 'ç¬”ç”»æ¥è¿‘';
            if (distance < 0.7) return 'ä¸­ç­‰å·®å¼‚';
            return 'ç¬”ç”»å·®å¼‚å¤§';
        }

        // è·å–è¯»éŸ³è·ç¦»æ´å¯Ÿ
        function getPronunciationInsight(distance) {
            if (distance < 0.8) return 'å‘éŸ³è¾ƒç®€å•';
            if (distance < 0.9) return 'éœ€è¦ç»ƒä¹ ';
            return 'å‘éŸ³å¤æ‚';
        }

        // æ›´æ–°é˜¶æ®µæŒ‡ç¤ºå™¨
        function updateStageIndicator() {
            // é‡ç½®æ‰€æœ‰é˜¶æ®µ
            document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.cultural-understanding-section, .concept-building-section, .memory-assessment-section')
                .forEach(s => s.classList.remove('active'));

            // æ¿€æ´»å½“å‰é˜¶æ®µ
            document.getElementById('stage' + currentStage).classList.add('active');

            if (currentStage === 1) {
                document.getElementById('culturalSection').classList.add('active');
            } else if (currentStage === 2) {
                document.getElementById('conceptSection').classList.add('active');
            } else if (currentStage === 3) {
                document.getElementById('memorySection').classList.add('active');
            }
        }

        // ä¸‹ä¸€é˜¶æ®µ
        function nextStage() {
            if (currentStage < 3) {
                currentStage++;
                updateStageIndicator();
            }
        }

        // ä¸Šä¸€é˜¶æ®µ
        function prevStage() {
            if (currentStage > 1) {
                currentStage--;
                updateStageIndicator();
            }
        }

        // è®°å¿†è¯„ä¼°
        function assessMemory(level) {
            learningSession.results[level]++;

            // è¿›å…¥ä¸‹ä¸€ä¸ªè¯
            learningSession.currentIndex++;

            if (learningSession.currentIndex >= learningSession.words.length) {
                // å­¦ä¹ å®Œæˆï¼Œæ˜¾ç¤ºç»Ÿè®¡
                showStats();
            } else {
                // æ˜¾ç¤ºä¸‹ä¸€ä¸ªè¯
                showCurrentWord();
            }
        }

        // æ˜¾ç¤ºç»Ÿè®¡
        function showStats() {
            document.getElementById('learningContainer').classList.add('hidden');
            document.getElementById('statsPanel').classList.remove('hidden');

            const total = learningSession.words.length;
            const results = learningSession.results;

            // æ›´æ–°ç»Ÿè®¡æ•°å­—
            document.getElementById('statTotal').textContent = total;
            document.getElementById('statMastered').textContent = results.mastered;
            document.getElementById('statUnderstood').textContent = results.understood;
            document.getElementById('statNeedReview').textContent = results.learning + results.difficult;

            // æ›´æ–°ç™¾åˆ†æ¯”å’Œè¿›åº¦æ¡
            const masteredPercent = (results.mastered / total * 100).toFixed(0);
            const understoodPercent = (results.understood / total * 100).toFixed(0);
            const learningPercent = (results.learning / total * 100).toFixed(0);
            const difficultPercent = (results.difficult / total * 100).toFixed(0);

            document.getElementById('masteredPercent').textContent = masteredPercent + '%';
            document.getElementById('understoodPercent').textContent = understoodPercent + '%';
            document.getElementById('learningPercent').textContent = learningPercent + '%';
            document.getElementById('difficultPercent').textContent = difficultPercent + '%';

            setTimeout(() => {
                document.getElementById('masteredBar').style.width = masteredPercent + '%';
                document.getElementById('understoodBar').style.width = understoodPercent + '%';
                document.getElementById('learningBar').style.width = learningPercent + '%';
                document.getElementById('difficultBar').style.width = difficultPercent + '%';
            }, 300);
        }

        // é‡æ–°å¼€å§‹
        function restart() {
            // é‡ç½®çŠ¶æ€
            selectedMode = null;
            currentStage = 1;
            learningSession = {
                words: [],
                currentIndex: 0,
                results: {
                    mastered: 0,
                    understood: 0,
                    learning: 0,
                    difficult: 0
                }
            };

            // é‡ç½®UI
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById('startBtn').disabled = true;

            // æ˜¾ç¤ºæ§åˆ¶é¢æ¿
            document.getElementById('statsPanel').classList.remove('active');
            document.getElementById('controlPanel').classList.remove('hidden');
        }
    </script>
</body>
</html>
